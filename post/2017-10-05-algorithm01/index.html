<!DOCTYPE html>



























<html class="not-ready text-sm lg:text-base" lang="zh-cn">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  
  <title>用 Python 解决数据结构与算法题 01 - BLOG</title>

  
  <meta name="theme-color" />
  
  <meta name="description" content="这是 Python 解决算法问题的第一期。我想以后每期写出三道题。本人是医学生，没有上过任何数据结构和算法课，对于解决算法题也纯属个人的课余兴趣爱好。还希望各位真正的大牛不吝赐教。我会继续坚持下去的。" />
  <meta name="author" content="" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://xzywisdili.com/main.min.css" />

  
  <script
    defer
    src="https://xzywisdili.com/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  <link
    rel="preload"
    as="image"
    href="https://xzywisdili.com/theme.%7B%7B%20if%20site.Params.monoDarkIcon%20%7D%7Dsvg%7B%7B%20else%20%7D%7Dpng%7B%7B%20end%20%7D%7D"
  />

  
  
  
  <link rel="preload" as="image" href="https://pic.stackoverflow.wiki/uploadImages/118/247/190/255/2022/07/28/18/53/8071d74a-1971-4d71-98c5-95575efef90f.svg" />
  
  

  
  <link rel="preload" as="image" href="https://xzywisdili.com/twitter.svg" />
  
  <link rel="preload" as="image" href="https://xzywisdili.com/github.svg" />
  

  
  <link rel="icon" href="https://xzywisdili.com/favicon.ico" />
  <link rel="apple-touch-icon" href="https://xzywisdili.com/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.101.0" />

  
  

  
  
  
  
  
  
  
  
  
  <meta property="og:title" content="用 Python 解决数据结构与算法题 01" />
<meta property="og:description" content="这是 Python 解决算法问题的第一期。我想以后每期写出三道题。本人是医学生，没有上过任何数据结构和算法课，对于解决算法题也纯属个人的课余兴趣爱好。还希望各位真正的大牛不吝赐教。我会继续坚持下去的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xzywisdili.com/post/2017-10-05-algorithm01/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2017-10-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-10-05T00:00:00+00:00" />


  
  <meta itemprop="name" content="用 Python 解决数据结构与算法题 01">
<meta itemprop="description" content="这是 Python 解决算法问题的第一期。我想以后每期写出三道题。本人是医学生，没有上过任何数据结构和算法课，对于解决算法题也纯属个人的课余兴趣爱好。还希望各位真正的大牛不吝赐教。我会继续坚持下去的。"><meta itemprop="datePublished" content="2017-10-05T00:00:00+00:00" />
<meta itemprop="dateModified" content="2017-10-05T00:00:00+00:00" />
<meta itemprop="wordCount" content="435">
<meta itemprop="keywords" content="算法,Python," />
  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="用 Python 解决数据结构与算法题 01"/>
<meta name="twitter:description" content="这是 Python 解决算法问题的第一期。我想以后每期写出三道题。本人是医学生，没有上过任何数据结构和算法课，对于解决算法题也纯属个人的课余兴趣爱好。还希望各位真正的大牛不吝赐教。我会继续坚持下去的。"/>

  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center">
  <div class="relative z-50 mr-auto flex items-center">
    <a class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold" href="https://xzywisdili.com/"
      >BLOG</a
    >
    <a
      class="btn-dark ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
    ></a>
  </div>

  <a
    class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
  ></a>

  <script>
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const htmlClass = document.documentElement.classList;
    setTimeout(() => htmlClass.remove('not-ready'), 10);

    const setDark = (newDark) => {
      metaTheme.setAttribute('content', newDark ? '#000' : '#fbfbfb');
      htmlClass[newDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', newDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    const darkVal = localStorage.getItem('dark');
    setDark(darkVal ? darkVal === 'true' : darkScheme.matches);

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"
    >
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./twitter.svg)"
        href=" https://twitter.com/xzywisdili "
        target="_blank"
      ></a>
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href=" https://github.com/github.com/xzywisdili "
        target="_blank"
      ></a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pt-20 pb-32 dark:prose-invert"
    >
      

<article>
  <header class="mb-20">
    <h1 class="!my-0 pb-2.5">用 Python 解决数据结构与算法题 01</h1>

    
    <div class="text-sm opacity-60">
      
      <time>Oct 5, 2017</time>
      
      
    </div>
    
  </header>

  <section><p>这是 Python 解决算法问题的第一期。我想以后每期写出三道题。本人是医学生，没有上过任何数据结构和算法课，对于解决算法题也纯属个人的课余兴趣爱好。还希望各位真正的大牛不吝赐教。我会继续坚持下去的。</p>
<h2 id="设计一个有-getmin-功能的栈">设计一个有 getMin 功能的栈</h2>
<p>题目：实现一个特殊的栈，在实现栈的基本功能的基础上，再实现返回栈中最小元素的操作。
要求：</p>
<ol>
<li><code>pop</code>，<code>push</code>，<code>get_min</code> 操作的时间复杂度都是 O(1)。</li>
<li>设计的栈类型可以使用线程的栈结构。</li>
</ol>
<p>首先先使用 Python 实现一个简单的栈：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Stack</span>:
</span></span><span style="display:flex;"><span>    __slots__ <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;__items&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>__items <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">is_empty</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>__items <span style="color:#f92672">==</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">peek</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>__items[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">size</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> len(self<span style="color:#f92672">.</span>__items)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">push</span>(self, new_value):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>__items<span style="color:#f92672">.</span>append(new_value)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">pop</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>__items<span style="color:#f92672">.</span>pop()
</span></span></code></pre></div><p>这个问题很简单，解决方法就是使用两个栈，一个用来存放数据，一个用来记录最小值即可。
在 <code>push</code> 新数据的时候，需要和存放最小值的栈 <code>stack_min</code> 栈顶的数据相比较。如果新数据比它小或者等于它，那么也把新数据 <code>push</code> 进 <code>stack_min</code> 的栈顶就可以了。
在 <code>pop</code> 的时候，需要检查输出的数据是否也存在在 <code>stack_min</code> 的栈顶，如果也存在的话，说明这个数据是栈内的最小值，也需要把它从 <code>stack_min</code> 中 <code>pop</code> 出去。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyStack</span>(object):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>stack_data <span style="color:#f92672">=</span> Stack()
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>stack_min <span style="color:#f92672">=</span> Stack()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">push</span>(self, new_value):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>stack_data<span style="color:#f92672">.</span>push(new_value)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>stack_min<span style="color:#f92672">.</span>is_empty():
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>stack_min<span style="color:#f92672">.</span>push(new_value)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> new_value <span style="color:#f92672">&lt;=</span> self<span style="color:#f92672">.</span>get_min():
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>stack_min<span style="color:#f92672">.</span>push(new_value)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">pop</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>stack_data<span style="color:#f92672">.</span>is_empty():
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#34;Your stack is empty!&#34;</span>)
</span></span><span style="display:flex;"><span>        value <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>stack_data<span style="color:#f92672">.</span>pop()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> value <span style="color:#f92672">==</span> self<span style="color:#f92672">.</span>get_min():
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>stack_min<span style="color:#f92672">.</span>pop()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_min</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>stack_min<span style="color:#f92672">.</span>is_empty():
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#34;Your stack is empty!&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>stack_min<span style="color:#f92672">.</span>peek()
</span></span></code></pre></div><p>以下是用来测试的代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>my_test_stack1 <span style="color:#f92672">=</span> MyStack()
</span></span><span style="display:flex;"><span>my_test_stack1<span style="color:#f92672">.</span>push(<span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> my_test_stack1<span style="color:#f92672">.</span>get_min() <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>my_test_stack1<span style="color:#f92672">.</span>push(<span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> my_test_stack1<span style="color:#f92672">.</span>get_min() <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>my_test_stack1<span style="color:#f92672">.</span>push(<span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> my_test_stack1<span style="color:#f92672">.</span>get_min() <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>my_test_stack1<span style="color:#f92672">.</span>push(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> my_test_stack1<span style="color:#f92672">.</span>get_min() <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>my_test_stack1<span style="color:#f92672">.</span>push(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> my_test_stack1<span style="color:#f92672">.</span>get_min() <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(my_test_stack1<span style="color:#f92672">.</span>pop()) <span style="color:#75715e"># 输出：2</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> my_test_stack1<span style="color:#f92672">.</span>get_min() <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(my_test_stack1<span style="color:#f92672">.</span>pop()) <span style="color:#75715e"># 输出：1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> my_test_stack1<span style="color:#f92672">.</span>get_min() <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>my_test_stack2 <span style="color:#f92672">=</span> MyStack()
</span></span><span style="display:flex;"><span>my_test_stack2<span style="color:#f92672">.</span>pop() <span style="color:#75715e"># 输出：Exception: Your stack is empty!</span>
</span></span></code></pre></div><p>另一个稍稍不同的解决问题的方法是，当新 <code>push</code> 的数据比 <code>stack_min</code> 栈顶数据大时，再在 <code>stack_min</code> 的栈顶复制一个同样的栈顶值，这样就可以直接 <code>pop</code> 而不用检查这个值的大小了。这个方法会比上述方法在 <code>push</code> 时稍费空间，但在 <code>pop</code> 时稍省时间。但两种方法的空间和时间复杂度都是相同的。</p>
<h2 id="仅用递归函数和栈操作逆序一个栈">仅用递归函数和栈操作逆序一个栈</h2>
<p>题目：一个栈依次压入1，2，3，4，5，那么从栈顶到栈底分别为5，4，3，2，1。将这个栈转置后，从栈顶到栈底为1，2，3，4，5，也就是实现栈中元素的逆序，但是只能用递归函数来实现，不能用其他数据结构。</p>
<p>逆序一个栈的步骤显而易见是先依次取出位于栈底的数据，然后再按照相反的顺序把数据压入即可了。而递归的思想在于，我先取出栈底的元素，然后把剩下的栈逆序，然后再把刚取出来的元素压进栈顶。同样，这道题的解答中使用的栈的实现与上面一题相同。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_last_element</span>(stack):
</span></span><span style="display:flex;"><span>    result <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span>pop()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> stack<span style="color:#f92672">.</span>is_empty():
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> result
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        last <span style="color:#f92672">=</span> get_last_element(stack)
</span></span><span style="display:flex;"><span>        stack<span style="color:#f92672">.</span>push(result)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> last
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">reverse</span>(stack):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> stack<span style="color:#f92672">.</span>is_empty():
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    item <span style="color:#f92672">=</span> get_last_element(stack)
</span></span><span style="display:flex;"><span>    reverse(stack)
</span></span><span style="display:flex;"><span>    stack<span style="color:#f92672">.</span>push(item)
</span></span></code></pre></div><p>测试用的代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>my_test_stack <span style="color:#f92672">=</span> Stack()
</span></span><span style="display:flex;"><span>my_test_stack<span style="color:#f92672">.</span>push(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>my_test_stack<span style="color:#f92672">.</span>push(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>my_test_stack<span style="color:#f92672">.</span>push(<span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>reverse(my_test_stack)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> my_test_stack<span style="color:#f92672">.</span>pop() <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;现在栈顶应该是最先 push 进去的 1&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> my_test_stack<span style="color:#f92672">.</span>pop() <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> my_test_stack<span style="color:#f92672">.</span>pop() <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>
</span></span></code></pre></div><h2 id="生成窗口最大值数据">生成窗口最大值数据</h2>
<p>题目：有一个整形数组 arr 和一个大小为 w 的窗口从数组的最左边滑到最右边，窗口每次向右边滑一个位置。比如数组为<code>[4, 3, 5, 4, 3, 3, 6, 7]</code>，就会有：
<code>[4 3 5] 4 3 3 6 7</code>
<code>4 [3 5 4] 3 3 6 7</code>
<code>4 3 [5 4 3] 3 6 7</code>
<code>4 3 5 [4 3 3] 6 7</code>
<code>4 3 5 4 [3 3 6] 7</code>
<code>4 3 5 4 3 [3 6 7]</code>
最大值依次是<code>[5, 5, 5, 4, 6, 7]</code>
请实现一个函数，输入为数组 <code>arr</code> 和窗口大小 <code>w</code>，输出为各窗口的最大值数组。</p>
<p>看到题目，我想都没想就写好了第一个函数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_max_in_window_v1</span>(arr, w):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> arr <span style="color:#f92672">==</span> [] <span style="color:#f92672">or</span> w <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">or</span> len(arr) <span style="color:#f92672">&lt;</span> w:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#34;Wrong arr length or window size.&#34;</span>)
</span></span><span style="display:flex;"><span>    max_result <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(arr) <span style="color:#f92672">-</span> w <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        max_result<span style="color:#f92672">.</span>append(max(arr[i:i<span style="color:#f92672">+</span>w]))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> max_result
</span></span></code></pre></div><p>测试结果也正确，但是总觉得有些不好，仔细一看它的时间复杂度是 O(N * W) （因为循环里面的 max 函数的复杂度为 O(W) ）。应该有更快的方法。于是想可以在每读取一个数组的时候，更新窗口最大值。你想节省时间，就必须得付出空间。于是乎使用另一个数组来存储最大值的下标，不断更新。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_max_in_window_v2</span>(arr, w):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> arr <span style="color:#f92672">==</span> [] <span style="color:#f92672">or</span> w <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">or</span> len(arr) <span style="color:#f92672">&lt;</span> w:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#34;Wrong arr length or window size.&#34;</span>)
</span></span><span style="display:flex;"><span>    qmax <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    max_result <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> index, item <span style="color:#f92672">in</span> enumerate(arr):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> len(qmax) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> arr[qmax[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]] <span style="color:#f92672">&lt;=</span> item:
</span></span><span style="display:flex;"><span>            qmax<span style="color:#f92672">.</span>pop()
</span></span><span style="display:flex;"><span>        qmax<span style="color:#f92672">.</span>append(index)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> qmax[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> index <span style="color:#f92672">-</span> w:
</span></span><span style="display:flex;"><span>            qmax<span style="color:#f92672">.</span>pop(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> index <span style="color:#f92672">&gt;=</span> w<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            max_result<span style="color:#f92672">.</span>append(arr[qmax[<span style="color:#ae81ff">0</span>]])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> max_result
</span></span></code></pre></div><p>主要就是在读取 <code>arr</code> 中的元素的时候，把最大值的下标存放在 <code>qmax</code> 的最左端。而小的依次往右排（你不能忽视那些相对小的数据，因为窗口在不停地向右移动。）这样，每读取一个元素，先更新 <code>qmax</code>，再把窗口最大值存放进 <code>result</code>，步骤非常清晰。在 Python 中 <code>qmax.pop(0)</code> 这条语句的时间复杂度是$O(W)$，是这个解法的一个缺憾。所以改天我想我需要写一个 Python 的链表实现，这样就比较好了。</p>
<p>测试通过：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>print(get_max_in_window_v2(arr, <span style="color:#ae81ff">3</span>)) <span style="color:#75715e"># 输出：[5, 5, 5, 4, 6, 7]</span>
</span></span></code></pre></div><p>感谢阅读。</p></section>

  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]"
      href="https://xzywisdili.com/tags/%E7%AE%97%E6%B3%95"
      >算法</a
    >
     
    <a
      class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]"
      href="https://xzywisdili.com/tags/python"
      >Python</a
    >
    
  </footer>
  

  
  
  
  <nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]">
    
    <a class="flex w-1/2 items-center p-6 pr-3 no-underline" href="https://xzywisdili.com/post/2017-10-15-trans01/"
      ><span class="mr-1.5">←</span><span>「翻译」如何用 Python 画出像 FiveThirtyEight 那么棒的图表</span></a
    >
    
    
    <a
      class="ml-auto flex w-1/2 items-center justify-end p-6 pl-3 no-underline"
      href="https://xzywisdili.com/post/2017-10-04-helloworld/"
      ><span>Hello World</span><span class="ml-1.5">→</span></a
    >
    
  </nav>
  

  
  
</article>


    </main>

    <footer class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60">
  <div class="mr-auto">
    &copy; 2022
    <a class="link" href="https://xzywisdili.com/">BLOG</a>
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank">Powered by Hugo️️</a
  >️
  <a class="link" href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank"
    >▷ Paper 6</a
  >
</footer>

  </body>
</html>
